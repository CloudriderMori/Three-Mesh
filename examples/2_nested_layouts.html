<!DOCTYPE html>
<html>
<head>
	<title>Mesh-UI</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<link type="text/css" rel="stylesheet" href="./style.css">
</head>

<body>
	<script src="three-mesh-ui.js"></script>
	<script src="libs/three.min.js"></script>
	<script src="libs/BoxLineGeometry.js"></script>
	<script src="libs/OrbitControls.js"></script>
	<script src="libs/VRButton.js"></script>

	<a href="https://github.com/felixmariotto/Three-Mesh-UI/blob/master/examples/0_basic_setup.html" target="_blank">Code on Github</a>

	<script>

		const WIDTH = window.innerWidth;
		const HEIGHT = window.innerHeight;

		let scene, camera, renderer, controls ;

		window.addEventListener('load', ()=> {
			init();
		});

		window.addEventListener('resize', ()=> {
			onWindowResize();
		});

		function init() {

			scene = new THREE.Scene();
			scene.background = new THREE.Color( 0xf2f2f2 );

			camera = new THREE.PerspectiveCamera( 60, WIDTH / HEIGHT, 0.1, 100 );

			renderer = new THREE.WebGLRenderer({
				antialias: true
			});
			renderer.setPixelRatio( window.devicePixelRatio );
			renderer.setSize( WIDTH, HEIGHT );
			renderer.xr.enabled = true;
			document.body.appendChild(VRButton.createButton(renderer));
			document.body.appendChild( renderer.domElement );

			controls = new THREE.OrbitControls( camera, renderer.domElement );
			camera.position.set( 0, 1.6, 0 );
			controls.target = new THREE.Vector3( 0, 1, -1.8 );
			controls.update();

			// ROOM

			room = new THREE.LineSegments(
				new THREE.BoxLineGeometry( 6, 6, 6, 10, 10, 10 ).translate( 0, 3, 0 ),
				new THREE.LineBasicMaterial( { color: 0x808080 } )
			);

			scene.add( room );

			// TEXT PANEL

			makeTextPanel();

			// 

			renderer.setAnimationLoop( loop );

		};

		//

		function makeTextPanel() {

			const uiContainer = new THREE.Group();
			uiContainer.position.set( 0, 1, -1.8 );
			uiContainer.rotation.x = -0.55;
			scene.add( uiContainer );

			const container = ThreeMeshUI.Block({
				ref: 'container',
				padding: 0.025,
				fontFamily: './fonts/helvetiker_regular.typeface.json'
			});

			const title = ThreeMeshUI.Block({
				height: 0.2,
				width: 1.5,
				margin: 0.025,
				justifyContent: 'center',
				fontSize: 0.08
			});

				title.appendChild(
					ThreeMeshUI.Text({
						content: "spiny bush viper"
					})
				);

			const contentContainer = ThreeMeshUI.Block({
				contentDirection: "row",
				padding: 0.02,
				margin: 0.025
			});

			const leftSubBlock = ThreeMeshUI.Block({
				height: 0.95,
				width: 1.0,
				margin: 0.025,
				padding: 0.025,
				alignContent: "left",
				justifyContent: "end"
			});

			const caption = ThreeMeshUI.Block({
				height: 0.07,
				width: 0.37,
				alignContent: 'center',
				justifyContent: 'center'
			});

				caption.appendChild(
					ThreeMeshUI.Text({
						content: "Mind you fingers",
						fontSize: 0.03
					})
				);

			const rightSubBlock = ThreeMeshUI.Block({
				margin: 0.025
			});

			const subSubBlock1 = ThreeMeshUI.Block({
				height: 0.35,
				width: 0.5,
				margin: 0.025,
				padding: 0.01
			});

				subSubBlock1.appendChild(

					ThreeMeshUI.Text({
						content: "Known for its extremely keeled dorsal scales that give it a ",
						fontSize: 0.035
					}),

					ThreeMeshUI.Text({
						content: "bristly",
						fontSize: 0.042
					}),

					ThreeMeshUI.Text({
						content: " appearance.",
						fontSize: 0.035
					})

				);

			const subSubBlock2 = ThreeMeshUI.Block({
				height: 0.525,
				width: 0.5,
				margin: 0.01,
				padding: 0.01,
				fontSize: 0.019
			});

				subSubBlock2.appendChild(
					ThreeMeshUI.Text({
						content: "The males of this species grow to maximum total length of 73 cm (29 in): body 58 cm (23 in), tail 15 cm (5.9 in). Females grow to a maximum total length of 58 cm (23 in). The males are surprisingly long and slender compared to the females.\nThe head has a short snout, more so in males than in females. The eyes are large and surrounded by 9–16 circumorbital scales. The orbits (eyes) are separated by 7–9 scales. The nostril is like a slit and separated from the eye by two scales. The eye and the supralabials are separated by a single row of scales. The supralabials number 7-10, of which the fourth is enlarged."
					})
				);

			leftSubBlock.appendChild( caption );
			rightSubBlock.appendChild( subSubBlock1, subSubBlock2 );
			contentContainer.appendChild( leftSubBlock, rightSubBlock );
			container.appendChild( title, contentContainer );

			uiContainer.add( container.threeOBJ );

		};

		//

		function onWindowResize() {

			camera.aspect = window.innerWidth / window.innerHeight;
			camera.updateProjectionMatrix();

			renderer.setSize( window.innerWidth, window.innerHeight );

		};

		//

		function loop() {
			controls.update();
			renderer.render( scene, camera );
			// console.log( renderer.info.render );
		};

	</script>
</body>
</html>